## 🌱8.1 스프링의 정의
* **애플리케이션 프레임워크**
  * 애플리케이션 프레임워크: 특정 계층이나 기술, 업무 분야에 국한되지 않고 애플리케이션의 전 영역을 포괄하는 범용적인 프레임워크, **애플리케이션 개발의 전 과정을 빠르고 편리하며 효율적으로 진행하는데 일차적인 목표**를 두는 프레임워크이다.
  * 단지 여러 계층의 다양한 기술을 그저 한데 모아뒀기 때문에 애플리케이션 프레임워크라고 불리는 건 아니다. 애플리케이션의 전 영역을 관통하는 일관된 프로그래밍 모델과 핵심 기술을 바탕으로 각 분야의 특정에 맞는 필요를 채워주고 있기 때문에, 애플리케이션을 빠르고 효과적으로 개발할 수가 있다. 바로 이것이 스프링이 애플리케이션 프레임워크라고 불리는 이유다.
* **경량급**
* * 스프링이 가볍다고 하는 이유는 불필요하게 무겁지 않다는 의미다.
  * EJB가 동작하려면 고가의 느리고 무서운 자바 서버(WAS)가 필요한 반면, 스프링은 가장 단순한 서버환경인 톰캣이나 제티에서도 완벽하게 동작한다. 스프링의 장점은 가볍고 단순한 환경에서도 복잡한 EJB와 고가의 WAS를 갖춰야만 가능했던 엔터프라이즈 개발의 고급 기술을 대부분 사용할 수 있다는 점이다.
  * 결과적으로 스프링은 EJB를 대표로 하는 기존의 많은 기술이 불필요하게 무겁고 복잡했음을 증명한 셈이고, 그런 면에서 스프링은 군더더기 없이 깔끔한 기술을 가진 '경량급' 프레임워크라고 불린 것이다. 
* **자바 엔터프라이즈 개발을편하게**
  * EJB는 개발자의 고민거리와 부담을 덜기 위해 다른 차원의 더 큰 복잡함을 애플리케이션 개발에 끌고오는 실수를 저질렀다. 이 때문에 프레임워크가 제공하는 기술에 대해 집중하는 불편함을 겪게됐다.
  * 스프링은 애플리케이션 개발자들이 스프링이라는 프레임워크가 제공하는 기술이 아니라 자신이 작성하는 애플리케이션의 로직에 더 많은 관심과 시간을 쏟게 해준다.
  * 스프링이 '엔터프라이즈 개발을 편하게 해준다'라는 EJB와 동일한 목적을 추구하지만 그 과정에서 다른 불편함을 추가하지 않아도 되게 만들었다.
* **오픈소스**
  * 오픈소스란 말 그대로 소스가 모두에게 공개되고, 특별한 라이선스를 취득할 필요없이 얼마든지 가져다 자유롭게 이용해도 된다는 뜻이다.
  * 스프링의 적용된 오픈소스 라이선스는 아파치 라이선스 버전 2.0이다. 아파치 라이선스에 따르면 스프링을 상업적인 목적의 제품에 포함시키거나 비공개 프로젝트에 자유롭게 이용해도 된다.
  * 스프링 개발자는 오픈소스의 문제점과 한계를 파악하고 지속적인 신뢰를 줄 수 있도록 개발을 책임지고 진행할 수 있는 전문 기업을 만들었다. 덕분에 안정적고 전문화된 개발과 품질관리가 가능했다.

## 🌱8.2 스프링의 목적
### 💡 엔터프라이즈 개발의 복잡함
자바 엔터프라이즈 개발이 실패하는 이유에 대해 많은 논의가 있었는데, 그 중 가장 대표적인 게 '엔터프라이즈 시스템 개발이 너무 복잡해져서'였다.
* **복잡함의 근본적인 이유**
  * 첫 번째는 기술적인 제약조건과 요구사항이 늘어가기 때문이다.
  * 두 번째는 엔터프라이즈 애플리케이션이 구현해야 할 핵심기능인 비즈니스 로직의 복잡함이 증가하기 때문이다.
* **복잡함을 가중시키는 원인**
  * 자바 엔터프라이즈 시스템 개발이 어려운 가장 큰 이유는 근본적인 비즈니스 로직과 엔터프라이즈 기술이라는 두 가지 복잡함이 한데 얽혀 있기 때문이다.
  * 더 큰 문제는 기술과 비즈니스 로직의 복잡함에 엉켜 있는 코드를 유지보수하는 일이다. 만약 적용한 기술을 변경해야 한다면? 또는 특정 로직을 수정해야 한다면? 하나의 수정 요구를 적용하기 위해 복잡하게 얽혀 있는 코드를 헤매다 보면 정작 수정할 대상이 아닌 부분에까지 영향을 줘서 새로운 버그를 만들 수도 있다.

### 💡 복잡함을 해결하려는 도전
* **제거될 수 없는 근본적인 복잡함**
  * 근본적으로 엔터프라이즈 개발에 나타나는 복잡함의 원인은 제거 대상이 아니다. 대신 그 복잡함을 효과적으로 상대할 수 있는 전략과 기법이 필요하다.
  * 문제는 비즈니스 로직의 복잡함을 효과적으로 다루기 위한 방법과 기술적인 복잡함을 효과적으로 처리하는 데 적용되는 방법이 다르다는 점이다. 따라서 두 가지 복잡함이 코드에 한데 어우러져 나타나는 전통적인 개발 방식에서는 효과적으로 복잡함을 다루기가 힘들다.
  * 따라서 가장 먼저 할 일은 성격이 다른 이 두가지 복잡함을 분리해내는 것이다.
* **실패한 해결책: EJB**
  * EJB의 기본 전략도 이 두 가지 종류의 복잡함을 분리하는 것이었다. 개발자가 로우레벨의 기술적인 복잡함에 신경쓰지 않고 비즈니스 로직을 효과적으로 개발하는 데 더 집중할 수 있게 하자는 목표가 있었다. 하지만 실패했다.
  * 애플리케이션 로직을 담은 핵심 코드에서 일부 기술적인 코드가 제거된 건 사실이지만, 오히려 EJB라는 환경과 스펙에 종속되는 코드로 만들어져야 하는 더 큰 부담을 안게 됐다.
* **비침투적인 방식을 통한 효과적인 해결책: 스프링**
  * EJB처럼 어떤 기술을 적용했을 때 그 기술과 관련된 코드나 규악 등이 코드에 등장하는 경우를 `침투적인 기술`이라고 한다.
  * 반면에 `비침투적인 기술`은 기술의 적용 사실이 코드에 직접 반영되지 않는다는 특징이 있다.
  * 스프링이 성공할 수 있었던 비결은 비침투적인 기술이라는 전략을 택했기 때문이다. 스프링을 이용하면 기술적인 복잡함과 비즈니스 로직을 다루는 코드를 깔끔하게 분리할 수 있다. 꼭 필요할 것 같은 경우조차도 기술 코드가 직접 노출되지 않도록 만들어줬다.

### 💡 복잡함을 상대하는 스프링의 전략
스프링의 기본적인 전략은 비즈니스 로직을 담은 애플리케이션 코드와 엔터프라이즈 기술을 처리하는 코드를 분리시키는 것이다.
* **기술적 복잡함을 상대하는 전략**
  * 첫 번째 문제: 기술에 대한 접근 방식이 일관성이 없고, 특정 환경에 종속적이다.
    * 일관성 없는 기술과 서버 환경의 변화에 대한 스프링의 공략 방법은 바로 서비스 추상화다. 기술적인 복잡함은 일단 추상화를 통해 로우레벨의 기술 구현 부분과 기술을 사용하는 인터페이스를 분리하고, 환경과 세부 기술에 독립적인 접근 인터페이스를 제공하는 것이 가장 좋은 해결책이다.
  * 두 번째 문제: 기술적인 처리를 담당하는 코드가 성격이 다른코드에 섞여서 등장한다.
    * 책임에 따라 계층을 구분하고 그 사이에 서로의 기술과 특성에 의존적인 인터페이스나 예외처리 등을 최대한 제거한다고 할지라도 근본적으로 엔터프라이즈 서비스를 적용하는 한 이런 문제는 쉽게 해결할 수 없다.
    * 이런 기술과 비즈니스 로직의 혼재로 발생하는 복잡함을 해결하기 위한 스프링의 접근 방법은 바로 `AOP`다.
    * AOP는 기술을 다루는 코드로 인한 복잡함이 기술 그 자체 이상으로 불필요하게 증대되지 않도록 도와주는 가장 강력한 수단이다.
* **비즈니스와 애플리케이션 로직의 복잡함을 상대하는 전략**
  * 비즈니스 로직은 가장 중요하게 다뤄져야 하고 가장 많이 신경 써야 한다. 예전에는 비즈니스 로직의 상당 부분을 DB에 두는 것이 유행이었지만 엔터프라이즈 시스템의 규모가 커지고, 복잡함이 증가하면서 DB에 비즈니스 로직을 두는 건 불편하고 위험한 일이라고 여겨지기 시작했다.
  * 따라서 엔터프라이즈 시스템 개발의 흐름은 점차로 비즈니스 로직은 애플리케이션 안에서 처리하도록 만드는 추세다. DB는 단지 데이터의 영구적인 저장에 활용하고 데이터 분석과 가공 그리고 그에 따라 로직을 처리하는 부분은 확장하기도 쉽고 비용도 싼 애플리케이션 서버 쪽으로 이동하는 것이다.
  * 비즈니스 로직의 복잡함을 상대하는 전략은 자바라는 객체지향 기술 그 자체다. 스프링은 단지 객체지향 언어의 장점을 제대로 살리지 못하게 방해했던 요소를 제거하도록 도와줄 뿐이다.
* **핵심 도구: 객체지향과 DI**
  * 기술적인 복잡함을 효과적으로 다루게 해주는 기법은 모두 DI를 바탕으로 하고 있다. 서비스 추상화, 템플릿/콜백, AOP와 같은 스프링의 기술은 DI 없이는 존재할 수 없는 것들이다.
  * DI는 객체지향 설계 기술 없이는 그 존재의미가 없다. DI란 특별한 기술이라기보다는 유연하게 확장할 수 있는 오브젝트 설계를 하다 보면 자연스럽게 적용하게 되는 객체지향 프로그래밍 기법일 뿐이다. 스프링은 단지 그것을 더욱 편하고 쉽게 사용하도록 도와줄 뿐이다.
  * 결국 모든 스프링의 기술과 전략은 객체지향이라는 자바 언어가 가진 강력한 도구를 극대화해서 사용할 수 있도록 돕는 것이라고 볼 수 있다. 스프링은 단지 거들 뿐이다.
  
## 🌱8.3 POJO 프로그래밍
### 💡 스프링의 핵심: POJO
스프링의 주요 기술인 IoC/DI, AOP와 PSA는 애플리케이션을 POJO로 개발할 수 있게 해주는 가능기술이라고 불린다.
### 💡 POJO란 무엇인가?
* POJO는 Plain Old Java Object의 첫 글자를 따서 만든 약자다.
### 💡 POJO의 조건
그렇다면 POJO 프로그래밍이란 무엇인가? 그저 EJB를 사용하지 않으면 POJO일까? 특정 프레임워크의 클래스를 상속하지 않으면 POJO일까? 명확하게 하자면 적어도 다음의 세 가지 조건을 충족해야 POJO라고 불릴 수 있다.
* **특정 규약에 종속되지 않는다.**
  * POJO는 자바 언어와 꼭 필요한 API 외에는 종속되지 않아야 한다. 따라서 EJB2와 같이 특정 규약을 따라 비즈니스 컴포넌트를 만들어야 하는 경우는 POJO가 아니다.
  * 특정 규약을 따라 만들게 하는 경우는 대부분 규약에서 제시하는 특정 클래스를 상속하도록 요구한다. 그럴 경우 자바의 단일 상속 제한 때문에 더 이상 해당 클래스에 객체지향적인 설계 기법을 적용하기가 어려워진다는 문제가 생긴다. 또한 규약이 적용된 환경에 종속적이 되기 때문에 다른 환경으로 이전이 힘들다는 문제점이 있다.
  * 별다른 가치를 주지도 못하는 규약 따위에 종속되지 않아야 하고, 객체지향 설계의 자유로운 적용이 가능한 오브젝트여야만 POJO라고 불릴 수 있다.
* **특정 환경에 종속되지 않는다.**
  * JNDI와 같은 특정 환경이 의존 대상 검색 방식에 종속적이라면 POJO라고 할 수 없다.
  * 또 환경에 종속적인 클래스나 API를 직접 쓴 경우처럼 순수한 애플리케이션 로직을 담고 있는 오브젝트 코드가 특정 환경에 종속되게 만드는 경우라면 POJO라고 할 수 없다. POJO는 환경에 독립적이어야한다.
  * 그럼 특정 기술규약과 환경에 종속되지 않으면 모두 POJO라고 말할 수 있는가? 단지 자바의 문법을 지키고, 순순하게 JavaSE API만을 사용했다고 해서 그 코드를 POJO라고 할 수 없다. **POJO는 객체지향적인 자바 언어의 충실하게 만들어져야 하기 때문이다.**
  * 자바는 객체지향 프로그래밍을 가능하게 해주는 언어이지만, 자바 언어 문법을 사용했다고 해서 자동으로 객체지향 프로그래밍과 객체지향 설계가 적용됐다고 볼 수는 없다.
  * 진정한 POJO란 객체지향적인 원리에 충실하면서, 환경과 기술에 종속되지 않고 필요에 따라 재활용될 수 있는 방식으로 설계된 오브젝트를 말한다. 그럼 POJO에 애플리케이션의 핵심 로직과 기능을 담아 설계하고 개발하는 방법을 POJO 프로그래밍이라고 할 수 있다.
### 💡 POJO의 장점
* 특정한 기술과 환경에 종속되지 않는 오브젝트는 그만큼 깔끔한 코드가 될 수 있다.
* POJO로 개발된 코드는 자동화된 테스트에 매우 유리하다. 환경의 제약은 코드의 자동화된 테스트를 어렵게 한다.
* 객체지향적인 설계를 자유롭게 적용할 수 있다는 것도 큰 장점이다.
### 💡 POJO 프레임워크
* 스프링은 비즈니스 로직의 복잡함과 엔터프라이즈 기술의 복잡함을 분리해서 구성할 수 있게 도와준다. 하지만 자신은 기술영역에만 관여하지 비즈니스 로직을 담당하는 POJO에서는 모습을 감춘다. POJO 프레임워크로서 스프링은 자신을 직접 노출하지 않으면서 애플리케이션을 POJO로 쉽게 개발할 수 있게 지원해준다.

## 🌱8.4 스프링의 기술
스프링에는 POJO 프로그래밍을 손쉽게 할 수 있도록 지원하는 세 가지 가능기술을 제공한다.
### 💡 제어의 역전(IoC) / 의존관계 주입(DI)
왜 두 개의 오브젝트를 분리해서 만들고, 인터페이스를 두고 느슨하게 연결한 뒤, 실제 사용할 대상은 DI를 통해 외부에서 지정하는 것일까? `유연한 확장이 가능하게 하기 위해서`다.
* DI의 활용방법
  * 핵심기능의 변경
  * 핵심기능의 동적인 변경
  * 부가기능의 추가
  * 인터페이스의 변경
  * 프록시
  * 템플릿과 콜백
  * 싱글톤과 오브젝트 스코프
  * 테스트
### 💡 애스펙트 지향 프로그래밍(AOP)
IoC/DI를 이용해서 POJO에 선언적인 엔터프라이즈 서비스를 제공할 수 있었지만 일부 서비스는 순수한 객체지향 기법만으로는 POJO의 조건을 유지한 채로 적용하기 힘들다. 바로 이런 문제를 해결하기 위해 AOP가 필요하다. 스프링의 AOP는 스프링이 POJO 프로그래밍을 지원하려는 그 핵심 목적을 위해 중요한 역할을 하고 있다.
* AOP의 적용 기법
  * 첫 번째는 스프링과 같이 다이내믹 프록시를 사용하는 방법이다.
  * 두 번째는 자바 언어의 한계를 넘어서는 언어의 확장을 이용하는 방법이다.
* AOP의 적용 단계
  * AOP 적용 1단계: 미리 준비된 AOP 이용
  * AOP 적용 2단계: 전담팀을 통한 정책 AOP 적용
  * AOP 적용 3단계: AOP의 자유로운 이용
### 💡 포터블 서비스 추상화(PSA)
서비스 추상화를 위해 필요한 기술은 DI뿐이다. 결국 DI 응용 방법의 한 가지 이므로 DI를 적극 활용해서 개발한다면 서비스 추상화는 자연스럽게 만들어 쓸 수 있다.

## 🌱8.5 정리
* 스프링은 개발철학과 목표를 분명히 이해하고 사용해야 한다.
* 스프링은 오픈소스 소프트웨어이며, 애플리케이션 개발의 모든 기술과 영역을 종합적으로 다루는 애플리케이션 프레임워크다.
* 엔터프라이즈 애플리케이션 개발의 복잡함은 비즈니스 로직과 엔터프라이즈 시스템의 기술적인 요구에 의해 발생한다. 기존의 접근 방법은 이 복잡도를 낮추지 못하며 자바의 객체지향적인 장점을 포기해야 한다는 문제점이 있다.
* 자바의 근본인 객체지향적인 원리에 충실하게 개발할 수 있으며, 환경과 규약에 의존적이지 않은 POJO를 이용한 애플리케이션 개발은 엔터프라이즈 시스템 개발의 복잡함이 주는 많은 문제를 해결할 수 있다.
* 스프링의 목적은 이런 POJO를 이용해 엔터프라이즈 애플리케이션을 쉽고 효과적으로 개발할 수 있도록 지원해주는 데 있다.
* POJO 방식의 개발을 돕기 위해 스프링은 IoC/DI, AOP, PSA와 같은 가능기술을 프레임워크와 컨테이너라는 방식을 통해 제공한다.

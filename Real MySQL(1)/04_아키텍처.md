## 🦅 4.1 MYSQL 엔진 아키텍처
* **MySQL 엔진**
  * 클라이언트로부터의 접속 및 쿼리 요청을 처리하는 커넥션 핸들러와 SQL 파서 및 전처리기, 쿼리의 최적화된 실행을 위한 옵티마이저가 중심을 이룬다.
  * MySQL 서버에서 MySQL 엔진은 하나다.
* **스토리지 엔진**
  * 실제 데이터를 디스크 스토리지에 저장하거나 디스크 스토리지로부터 데이터를 읽어오는 부분을 전담한다.
  * MySQL 서버에서 스토리지 엔진은 동시에 여러 개를 사용할 수 있다.
  * 각 스토리지 엔진은 성능 향상을 위해 `키 캐시`(MyISAM 스토리지 엔진)나 `INNODB 버퍼 풀`(InnoDB 스토리지 엔진)과 같은 기능을 내장하고 있다.
* **핸들러 API**
  * MySQL 엔진의 쿼리 실행기에서 데이터를 쓰거나 읽어야 할 때는 각 스토리지 엔진에 쓰기 또는 읽기를 요청하는데, 이러한 요청을 핸들러(Handler) 요청이라 하고, 이 때 사용되는 API를 핸들러 API라고 한다.
* **MySQL 스레딩 구조**   
  MySQL 서버는 프로세스 기반이 아닌 `스레드 기반`으로 작동한다.
  * 포그라운드 스레드(클라이언트 스레드, 사용자 스레드)
    * 최소한 MySQL 서버에 접속된 클라이언트의 수만큼 존재하며, 주로 각 클라이언트 사용자가 요청하는 쿼리 문장을 처리한다.
    * 데이터를 MySQL의 데이터 버퍼나 캐시로부터 가져오며, 버퍼나 캐시에 없는 경우에는 직접 디스크의 데이터나 인덱스 파일로부터 데이터를 읽어와서 작업을 처리한다.
  * 백그라운드 스레드
    * `InnoDB` 백그라운드에서 처리하는 작업
      * 인서트 버퍼를 병합하는 스레드
      * **로그를 디스크로 기록하는 스레드**
      * **InnoDB 버퍼 풀의 데이터를 디스크에 기록하는 스레드**
      * 데이터를 버퍼로 읽어오는 스레드
      * 잠금이나 데드락을 모니터링하는 스레드
* **메모리 할당 및 사용 구조**   
  글로벌 메모리 영역과 로컬 메모리 영역은 `MySQL 서버 내에 존재하는 많은 스레드가 공유해서 사용하는 공간인지 여부`에 따라 구분된다.   
  <img src="https://github.com/user-attachments/assets/c37c9e94-52da-494b-b931-5c90f0860e02" width="500"/>
  * 글로벌 메모리 영역
    * 일반적으로 클라이언트 스레드의 수와 무관하게 하나의 메모리 공간만 할당된다.(필요에 따라 2개 이상의 메모리 공간을 할당받을 수 있지만, 클라이언트의 스레드 수와는 무관하며 글로벌 영역은 모든 스레드에 의해 공유된다.)
  * 로컬 메모리 영역(세션 메모리 영역, 클라이언트 메모리 영역)
    * MySQL 서버상에 존재하는 클라이언트 스레드가 쿼리를 처리하는 데 사용하는 메모리 영역이다.
    * 로컬 메모리는 각 클라이언트 스레드별로 독립적으로 할당되며 **절대 공유되어 사용되지 않는다.**
* **플러그인 스토리지 엔진 모델**
  * MySQL 서버에서는 스토리지 엔진뿐만 아니라 다양한 기능을 플러그인 형태로 지원한다.
  * 인증이나 전문 검색 파서 또는 쿼리 재작성과 같은 플러그인이 있으며, 비밀번호 검증과 커넥션 제어 등에 관련된 다양한 플러그인이 제공된다. 뿐만 아니라 MySQL 서버의 기능을 커스텀하게 확장할 수 있게 플러그인 API가 매뉴얼에 공개되어 있으므로 기존 MySQL 서버에서 제공하던 기능들을 확장하거나 완전히 새로운 기능들을 플러그인을 이용해 구현할 수도 있다.
* **컴포넌트**
  * MySQL 8.0부터는 기존의 플러그인 아키텍처를 대체하기 위해 컴포넌트 아키텍처가 지원된다.
  * MySQL 서버 플러그인의 단점
    1. 플러그인은 오직 MySQL 서버와 인터페이스할 수 있고, 플러그인끼리는 통신할 수 없음
    2. 플러그인은 MySQL 서버의 변수나 함수를 직접 호출하기 때문에 안전하기 않음(캡슐화 안 됨)
    3. 플러그인은 상호 의존 관계를 설정할 수 없어서 초기화가 어려움
* **쿼리 실행 구조**
  * 쿼리파서
  * 전처리기
  * 옵티마이저
  * 실행 엔진
  * 핸들러(스토리지 엔진)
* **복제**
* **쿼리 캐시**
* **스레드풀**
* **트랜잭션 지원 메타데이터**
</br>

## 🦅 4.2 InnoDB 스토리지 엔진 아키텍처

## 🦅 4.3 MyISAM 스토리지 엔진 아키텍처

## 🦅 4.4 MYSQL 로그 파일
